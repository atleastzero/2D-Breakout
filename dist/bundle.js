(()=>{"use strict";const t=document.querySelector("canvas"),e=t.getContext("2d");e.save();const i=e,s=class{constructor(t,e,i,s,h="red"){this.x=t,this.y=e,this.width=i,this.height=s,this.color=h,this.dx=0,this.dy=0,this.rotate=0}move(){return this.x+=this.dx,this.y+=this.dy,this}moveTo(t,e){return this.x=t,this.y=e,this}render(t){return t.save(),t.translate(this.x,this.y),t.rotate(this.rotate*Math.PI/180),t.beginPath(),t.fillStyle=this.color,t.fillRect(-this.width/2,-this.height/2,this.width,this.height),t.restore(),this}},h=class extends s{constructor(t,e,i,s,h,o,r){super(o,r),this.width=t,this.height=e,this.threeColor=i,this.twoColor=s,this.oneColor=h,this.status=3}render(){this.status>0&&(i.beginPath(),i.rect(this.x,this.y,this.width,this.height),3===this.status?i.fillStyle=this.threeColor:2===this.status?i.fillStyle=this.twoColor:i.fillStyle=this.oneColor,i.fill(),i.closePath())}},o=75,r="Right",l="Left",n="ArrowRight",c="ArrowLeft",d="16px Arial",a="#0095DD",f=[],u=new class extends s{constructor(t,e,i,s){super(i,s),this.radius=t,this.color=e}render(){i.beginPath(),i.arc(this.x,this.y,this.radius,0,2*Math.PI),i.fillStyle=this.color,i.fill(),i.closePath()}}(10,a,t.width/2,t.height-30),x=new class extends s{constructor(t,e,i,s,h){super(s,h),this.width=t,this.height=e,this.color=i}render(){i.beginPath(),i.rect(this.x,t.height-this.height,this.width,this.height),i.fillStyle=this.color,i.fill(),i.closePath()}}(o,10,a,(t.width-o)/2,t.height-10),y=new class extends s{constructor(e,i,s=3){super(t.width-65,20),this.font=e,this.color=i,this.left=s}decrement(){this.left-=1}render(){i.font=this.font,i.fillStyle=this.color,i.fillText("Lives: "+this.left,t.width-65,20)}}(d,a),w=new class extends s{constructor(t,e){super(8,20),this.font=t,this.color=e,this.total=0}increment(t=1){this.total+=t}render(){i.font=this.font,i.fillStyle=this.color,i.fillText("Score: "+this.total,8,20)}}(d,a);let g=2,m=-2,S=!1,P=!1;!function(){for(let t=0;t<5;t+=1){f[t]=[];for(let e=0;e<3;e+=1){const i=85*t+30,s=30*e+30;f[t][e]=new h(75,20,"red","yellow","green",i,s)}}}(),document.addEventListener("keydown",(function(t){t.key===r||t.key===n?S=!0:t.key!==l&&t.key!==c||(P=!0)}),!1),document.addEventListener("keyup",(function(t){t.key===r||t.key===n?S=!1:t.key!==l&&t.key!==c||(P=!1)}),!1),document.addEventListener("mousemove",(function(e){const i=e.clientX-t.offsetLeft;i>0&&i<t.width&&(x.x=i-37.5)}),!1),function e(){i.clearRect(0,0,t.width,t.height),function(){for(let t=0;t<5;t+=1)for(let e=0;e<3;e+=1)f[t][e].render()}(),u.render(),i.beginPath(),i.rect(x.x,t.height-10,o,10),i.fillStyle=a,i.fill(),i.closePath(),function(){for(let t=0;t<5;t+=1)for(let e=0;e<3;e+=1){const i=f[t][e];i.status>0&&u.x>i.x&&u.x<i.x+75&&u.y>i.y&&u.y<i.y+20&&(m=-m,i.status-=1,w.increment(),45===w&&(alert("YOU WIN, CONGRATULATIONS!"),document.location.reload()))}}(),w.render(),y.render(),(u.x+g>t.width-10||u.x+g<10)&&(g=-g),u.y+m<10?m=-m:u.y+m>t.height-10&&(u.x>x.x&&u.x<x.x+o?m=-m:(y.decrement(),y.left?(u.x=t.width/2,u.y=t.height-30,g=2,m=-2,x.x=(t.width-o)/2):(alert("GAME OVER"),document.location.reload()))),S?(x.x+=7,x.x+o>t.width&&(x.x=t.width-o)):P&&(x.x-=7,x.x<0&&(x.x=0)),u.x+=g,u.y+=m,requestAnimationFrame(e)}()})();